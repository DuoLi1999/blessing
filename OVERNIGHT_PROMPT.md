---
## ä½ çš„ä»»åŠ¡

æ ¹æ® `plan.txt` å°† Blessingï¼ˆæ–°æ˜¥ç¥ç¦ç”Ÿæˆå™¨ï¼‰ä» Express åç«¯è¿ç§»åˆ° Vercel Serverless Functionsã€‚æˆ‘ä¼šå»ç¡è§‰ï¼Œå¤§æ¦‚8å°æ—¶åå›æ¥éªŒæ”¶æˆæœã€‚

é¡¹ç›®åœ°å€ï¼š`/home/luka/Projects/blessing`

---

## âš ï¸ æ ¸å¿ƒè§„åˆ™ï¼ˆå¿…é¡»éµå®ˆï¼‰

### 1. ç»å¯¹ä¸è¦è¯¢é—®ç”¨æˆ·
- ç”¨æˆ·å·²ç»ç¡è§‰äº†ï¼Œä¸è¦ä½¿ç”¨ä»»ä½• AskUserQuestion
- æ‰€æœ‰é—®é¢˜è‡ªå·±è§£å†³ï¼šæœç´¢æ–‡æ¡£ã€æŸ¥çœ‹GitHub issueã€å°è¯•ä¸åŒæ–¹æ¡ˆ

### 2. è‡ªä¸»å†³ç­–å¹¶è®°å½•
- é‡åˆ°æŠ€æœ¯é€‰æ‹©æ—¶ï¼Œè‡ªå·±æŒ‰ç…§æœ€ä½³å®è·µåšå†³å®š
- **æ‰€æœ‰é‡è¦å†³ç­–å¿…é¡»è®°å½•åœ¨ `task-plan.md` ä¸­**ï¼Œæ ¼å¼ï¼š
  ```
  ## å†³ç­– [YYYY-MM-DD HH:MM]
  ### é—®é¢˜
  [æè¿°é‡åˆ°çš„é—®é¢˜æˆ–é€‰æ‹©]

  ### é€‰æ‹©çš„æ–¹æ¡ˆ
  [ä½ é€‰æ‹©çš„æ–¹æ¡ˆ]

  ### åŸå› 
  [ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªæ–¹æ¡ˆ]

  ### å¤‡é€‰æ–¹æ¡ˆï¼ˆæœªé€‰ï¼‰
  [å…¶ä»–å¯è¡Œæ–¹æ¡ˆåŠæœªé€‰åŸå› ]
  ```

### 3. å¤„ç†ä¾èµ–é—®é¢˜
- **å¦‚æœä»»åŠ¡éœ€è¦ç”¨æˆ·æä¾›çš„ä¿¡æ¯/èµ„æºæ‰èƒ½ç»§ç»­**ï¼ˆæ¯”å¦‚éœ€è¦ API Keyã€éœ€è¦ç¡®è®¤è®¾è®¡ç­‰ï¼‰ï¼š
  - åœ¨ `task-plan.md` ä¸­è®°å½•éšœç¢åŸå› 
  - å°†ä»»åŠ¡çŠ¶æ€æ”¹ä¸º `suspended`
  - ç»§ç»­åšå…¶ä»–å¯ä»¥ç‹¬ç«‹å®Œæˆçš„ä»»åŠ¡

### 4. ä»»åŠ¡çŠ¶æ€ç®¡ç†
- å®Œæˆçš„ä»»åŠ¡ï¼šçŠ¶æ€æ”¹ä¸º `completed`
- è¿›è¡Œä¸­ï¼šçŠ¶æ€æ”¹ä¸º `in-progress`
- éœ€è¦ç”¨æˆ·èµ„æºï¼šçŠ¶æ€æ”¹ä¸º `suspended`

### 5. ä¼˜å…ˆçº§
- **ä¼˜å…ˆå®Œæˆèƒ½ç‹¬ç«‹å®Œæˆçš„éƒ¨åˆ†**
- æ— æ³•å®Œæˆçš„éƒ¨åˆ†è®°å½•ä¸‹æ¥ï¼Œç­‰å¾…ç”¨æˆ·èµ·åºŠåå¤„ç†

### 6. ä¸è¦ç€æ€¥
- æœ‰8å°æ—¶æ—¶é—´ï¼Œæ…¢æ…¢åš
- ä¸è¦èŠ‚çº¦tokenï¼Œåšå¯¹æœ€é‡è¦
- å¤šæµ‹è¯•ã€å¤šéªŒè¯ï¼Œé¿å…è¿”å·¥

### 7. ä½¿ç”¨ Skills è§£å†³é—®é¢˜
- **é‡åˆ°æŠ€æœ¯é—®é¢˜ï¼Œä¸»åŠ¨ä½¿ç”¨ Skills å¯»æ‰¾è§£å†³æ–¹æ¡ˆ**
- ä¸è¦è‡ªå·±ç¡¬æƒ³ï¼Œå–„ç”¨å·¥å…·

### 8. åˆ†é˜¶æ®µæ‰§è¡Œ + å•æµ‹
- æ‰€æœ‰å­ä»»åŠ¡åˆ†é˜¶æ®µæ‰§è¡Œ
- **æ¯ä¸ªé˜¶æ®µå®Œæˆåè¿è¡Œå•æµ‹**ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸
- é¿å…å…¨æå®Œäº†å‘ç°ä¸è¡Œè¦æ¨å€’é‡æ¥

### 9. UIä¸è¦çº ç»“
- å°½é‡ç”¨ä¸»æµé€šä¿—çš„å†™æ³•
- åŠŸèƒ½ä¼˜å…ˆï¼Œæ˜å¤©æˆ‘ä¼šæ‰“ç£¨ç»†èŠ‚
- ä¿è¯åŸºæœ¬ç¾è§‚å³å¯

---

## ğŸ› ï¸ Skills ä½¿ç”¨æŒ‡å—

é‡åˆ°é—®é¢˜æ—¶ï¼Œ**ä¸»åŠ¨ä½¿ç”¨**ä»¥ä¸‹ Skillsï¼š

### 1. find-skills
**è§¦å‘æ¡ä»¶ï¼š** ä¸ç¡®å®šæ˜¯å¦æœ‰ Skill èƒ½è§£å†³å½“å‰é—®é¢˜  
**ä½¿ç”¨æ–¹å¼ï¼š** `/find-skills`  
**ç¤ºä¾‹ï¼š** "å¸®æˆ‘æ‰¾ä¸€ä¸ªèƒ½å¤„ç† Vercel éƒ¨ç½²çš„ skill"

### 2. react-patterns
**è§¦å‘æ¡ä»¶ï¼š** ç¼–å†™ React ç»„ä»¶ã€hooksã€çŠ¶æ€ç®¡ç†  
**ä½¿ç”¨æ–¹å¼ï¼š** `/react-patterns`  
**è¯´æ˜ï¼š** æä¾› React 19 æœ€ä½³å®è·µã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 3. vercel-composition-patterns
**è§¦å‘æ¡ä»¶ï¼š** é…ç½® Vercel Serverless Functionsã€è·¯ç”±ã€æµå¼å“åº”  
**ä½¿ç”¨æ–¹å¼ï¼š** `/vercel-composition-patterns`  
**è¯´æ˜ï¼š** Vercel Functions ä¸“ç”¨æŒ‡å—ï¼ŒåŒ…å« SSE å®ç°

### 4. code-review
**è§¦å‘æ¡ä»¶ï¼š** å®Œæˆä¸€ä¸ª Phase åï¼Œè¯·æ±‚ä»£ç å®¡æŸ¥  
**ä½¿ç”¨æ–¹å¼ï¼š** `/code-review`  
**è¯´æ˜ï¼š** è‡ªåŠ¨æ£€æŸ¥ä»£ç è´¨é‡ã€æ½œåœ¨é—®é¢˜

### 5. security-auditor
**è§¦å‘æ¡ä»¶ï¼š** å¤„ç† API Keysã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·è¾“å…¥  
**ä½¿ç”¨æ–¹å¼ï¼š** `/security-auditor`  
**è¯´æ˜ï¼š** æ£€æŸ¥å®‰å…¨æ¼æ´ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²

### 6. web-search-plus
**è§¦å‘æ¡ä»¶ï¼š** é‡åˆ°ä¸ç¡®å®šçš„æŠ€æœ¯é—®é¢˜  
**ä½¿ç”¨æ–¹å¼ï¼š** `/web-search-plus [ä½ çš„é—®é¢˜]`  
**è¯´æ˜ï¼š** æ™ºèƒ½æœç´¢ï¼Œè·å–æœ€æ–°æ–‡æ¡£å’Œè§£å†³æ–¹æ¡ˆ

---

## ğŸ“‹ ä»»åŠ¡è®¡åˆ’æ–‡ä»¶

ä½ å¿…é¡»åˆ›å»ºå¹¶æŒç»­æ›´æ–° `task-plan.md`ï¼Œæ ¼å¼ï¼š

```markdown
# Task Plan - Blessing è¿ç§»åˆ° Vercel

## æ€»ä½“è¿›åº¦
- å·²å®Œæˆ: X%
- é¢„è®¡å®Œæˆæ—¶é—´: [é¢„è®¡æ—¶é—´]

---

## ä»»åŠ¡æ¸…å•

### Phase 1: åˆ›å»º Vercel Serverless Functions [in-progress]
- [ ] åˆ›å»º api/ ç›®å½•ç»“æ„
- [ ] è¿ç§» lib/providers.ts
- [ ] è¿ç§» lib/promptBuilder.ts
- [ ] è¿ç§» lib/blessingStore.ts
- [ ] åˆ›å»º api/models.ts
- [ ] åˆ›å»º api/health.ts
- [ ] åˆ›å»º api/generate.ts (SSE æµå¼)
- [ ] åˆ›å»º vercel.json
- [ ] æœ¬åœ°æµ‹è¯• API
- çŠ¶æ€: in-progress

### Phase 2: å‰ç«¯é‡æ„
- [ ] æ›´æ–° src/types.ts
- [ ] é‡å†™ src/services/llm.ts
- [ ] åˆ›å»º src/hooks/useModelSelect.ts
- [ ] åˆ›å»º src/components/ModelSelector.tsx
- [ ] ä¿®æ”¹ src/hooks/useGenerate.ts
- [ ] ä¿®æ”¹ src/App.tsx
- [ ] ä¿®æ”¹ src/components/Header.tsx
- [ ] ä¿®æ”¹ src/components/InputPanel.tsx
- [ ] æ›´æ–° vite.config.ts
- [ ] æ›´æ–° package.json
- [ ] åˆ é™¤æ—§æ–‡ä»¶
- çŠ¶æ€: pending

### Phase 3: æµ‹è¯•ä¸éªŒè¯
- [ ] API ç«¯ç‚¹æµ‹è¯•
- [ ] åŠŸèƒ½æµ‹è¯• (3ç§é£æ ¼å¹¶è¡Œ)
- [ ] å®‰å…¨æ£€æŸ¥ (security-auditor)
- [ ] ä»£ç å®¡æŸ¥ (code-review)
- çŠ¶æ€: pending

### Phase 4: Vercel éƒ¨ç½²
- [ ] Git åˆå§‹åŒ–å¹¶æ¨é€
- [ ] Vercel é¡¹ç›®é…ç½®
- [ ] è®¾ç½®ç¯å¢ƒå˜é‡
- [ ] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ ] çº¿ä¸ŠéªŒè¯
- çŠ¶æ€: pending

---

## å†³ç­–è®°å½•

[è®°å½•æ‰€æœ‰é‡è¦å†³ç­–]

### å†³ç­– [YYYY-MM-DD HH:MM]
#### é—®é¢˜
[æè¿°é—®é¢˜]

#### ä½¿ç”¨çš„ Skill
[ä½¿ç”¨çš„ Skill åç§°]

#### é€‰æ‹©çš„æ–¹æ¡ˆ
[æœ€ç»ˆé€‰æ‹©]

#### åŸå› 
[ä¸ºä»€ä¹ˆ]

#### ä»£ç å˜æ›´
[ç›¸å…³æ–‡ä»¶]

---

## éšœç¢è®°å½•

### [éšœç¢1]
- ä»»åŠ¡: [æŸä¸ªä»»åŠ¡]
- åŸå› : [ä¸ºä»€ä¹ˆå¡ä½]
- éœ€è¦çš„èµ„æº: [éœ€è¦ç”¨æˆ·æä¾›ä»€ä¹ˆ]
- çŠ¶æ€: suspended

---

## é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### [é—®é¢˜1]
- é—®é¢˜æè¿°: ...
- ä½¿ç”¨çš„ Skill: ...
- è§£å†³æ–¹æ¡ˆ: ...
- å‚è€ƒèµ„æº: ...
```

---

## ğŸš€ å·¥ä½œæµç¨‹

### Phase 1: åˆ›å»º Vercel Serverless Functions (1.5å°æ—¶)

**ç›®æ ‡ï¼š** å°†ç°æœ‰ Express åç«¯è¿ç§»åˆ° Vercel Serverless

**æ­¥éª¤ï¼š**
1. **åˆ›å»ºç›®å½•ç»“æ„**
   ```
   blessing/
   â”œâ”€â”€ api/                          # Vercel Serverless Functions
   â”‚   â”œâ”€â”€ generate.ts               # POST /api/generate (SSE æµå¼)
   â”‚   â”œâ”€â”€ models.ts                 # GET /api/models
   â”‚   â””â”€â”€ health.ts                 # GET /api/health
   â”œâ”€â”€ lib/                          # æœåŠ¡ç«¯å…±äº«ä»£ç 
   â”‚   â”œâ”€â”€ providers.ts              # Provider æ³¨å†Œè¡¨
   â”‚   â”œâ”€â”€ promptBuilder.ts          # Prompt æ„å»º
   â”‚   â””â”€â”€ blessingStore.ts          # Few-shot ç¤ºä¾‹
   ```

2. **åˆ›å»º `lib/providers.ts`**
   - ä» `server/providers.js` è¿ç§»
   - æ”¹ä¸º TypeScript
   - ä»ç¯å¢ƒå˜é‡è¯»å– API Keyï¼š`process.env.DEEPSEEK_API_KEY`
   - å®ç° `getAvailableModels()` - åªè¿”å›é…ç½®äº† key çš„ provider
   - å®ç° `getProviderConfig(id)` - è¿”å› { baseUrl, model, apiKey }
   - **æ£€æŸ¥ Skillï¼š** `/vercel-composition-patterns`

3. **åˆ›å»º `lib/promptBuilder.ts`**
   - ä» `src/skills/promptBuilder.ts` å¤åˆ¶
   - æ— éœ€å¤§å¹…ä¿®æ”¹ï¼ˆçº¯é€»è¾‘ï¼Œä¸ä¾èµ–æµè§ˆå™¨ APIï¼‰
   - **æ£€æŸ¥ Skillï¼š** `/react-patterns` ç¡®ä¿ TypeScript ç±»å‹

4. **åˆ›å»º `lib/blessingStore.ts`**
   - ä» `src/skills/blessingStore.ts` å¤åˆ¶
   - ä¿®æ”¹ JSON å¯¼å…¥æ–¹å¼ï¼šä½¿ç”¨ `fs.readFileSync` æˆ–åŠ¨æ€ import
   - **æ£€æŸ¥ Skillï¼š** `/vercel-composition-patterns` å¤„ç†æœåŠ¡ç«¯æ–‡ä»¶è¯»å–

5. **åˆ›å»º API ç«¯ç‚¹**
   - `api/models.ts` - GET /api/modelsï¼Œè¿”å›å¯ç”¨æ¨¡å‹åˆ—è¡¨
   - `api/health.ts` - GET /api/healthï¼Œè¿”å› { status: "ok" }
   - `api/generate.ts` - POST /api/generateï¼ŒSSE æµå¼ç”Ÿæˆï¼ˆæ ¸å¿ƒï¼‰
     - ä½¿ç”¨ `export const config = { maxDuration: 60 }`
     - è§£æè¯·æ±‚ä½“ï¼š{ model, relationship, style, length, name?, note?, reference? }
     - è°ƒç”¨ lib/providers.ts è·å–é…ç½®
     - è°ƒç”¨ lib/promptBuilder.ts æ„å»º prompt
     - è°ƒç”¨ lib/blessingStore.ts è·å– few-shot
     - fetch LLM APIï¼Œstream æ¨¡å¼
     - SSE æ ¼å¼è¿”å›ï¼š`data: {"token":"é©¬"}\n\n`
     - ç»“æŸï¼š`data: [DONE]\n\n`

6. **åˆ›å»º `vercel.json`**
   ```json
   {
     "rewrites": [
       { "source": "/api/(.*)", "destination": "/api/$1" },
       { "source": "/((?!api/).*)", "destination": "/index.html" }
     ],
     "functions": {
       "api/generate.ts": { "maxDuration": 60 }
     }
   }
   ```

**éªŒè¯ï¼š**
```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# æœ¬åœ°è¿è¡Œ
vercel dev

# æµ‹è¯• API
curl http://localhost:3000/api/health
curl http://localhost:3000/api/models
curl -N -X POST http://localhost:3000/api/generate \
  -H "Content-Type: application/json" \
  -d '{"model":"deepseek-chat","relationship":"friend","style":"casual","length":"medium"}'
```

**å†³ç­–è®°å½•ï¼š**
- Provider é…ç½®æ–¹æ¡ˆ
- SSE å®ç°æ–¹å¼

---

### Phase 2: å‰ç«¯é‡æ„ (2å°æ—¶)

**ç›®æ ‡ï¼š** ç§»é™¤ API Key ç®¡ç†ï¼Œæ·»åŠ æ¨¡å‹é€‰æ‹©å™¨

**æ­¥éª¤ï¼š**
1. **æ›´æ–°ç±»å‹å®šä¹‰** (`src/types.ts`)
   - åˆ é™¤ Provider æ¥å£
   - æ–°å¢ ModelInfoï¼š{ id: string, name: string, provider: string }

2. **é‡å†™ LLM æœåŠ¡** (`src/services/llm.ts`)
   - åˆ é™¤ç°æœ‰çš„ `createLLMStream(provider, apiKey, ...)`
   - æ–°å¢ `fetchModels(): Promise<ModelInfo[]>` - GET /api/models
   - æ–°å¢ `createGenerateStream(model, options, callbacks, signal)`
     - ä¸å†ä¼  provider å’Œ apiKey
     - ç›´æ¥ä¼  { model, relationship, style, length, name, note, reference }
     - SSE è§£æé€»è¾‘å¤ç”¨ç°æœ‰ä»£ç 
   - **æ£€æŸ¥ Skillï¼š** `/react-patterns`

3. **åˆ›å»ºæ¨¡å‹é€‰æ‹© Hook** (`src/hooks/useModelSelect.ts`)
   - useEffect ä¸­è°ƒç”¨ fetchModels() è·å–å¯ç”¨æ¨¡å‹
   - localStorage è®°ä½ç”¨æˆ·é€‰æ‹©ï¼ˆkey: "blessing-selected-model"ï¼‰
   - æš´éœ²ï¼š{ models, selectedModel, setSelectedModel, loading, error }
   - **æ£€æŸ¥ Skillï¼š** `/react-patterns`

4. **åˆ›å»ºæ¨¡å‹é€‰æ‹©å™¨ç»„ä»¶** (`src/components/ModelSelector.tsx`)
   - ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼Œæ˜¾ç¤ºæ¨¡å‹åç§°
   - æŒ‰ provider åˆ†ç»„ï¼ˆå¦‚æœå¤šä¸ª provider æœ‰æ¨¡å‹ï¼‰
   - æ²¿ç”¨ç°æœ‰é‡‘è‰²ä¸»é¢˜é£æ ¼
   - **æ£€æŸ¥ Skillï¼š** `/react-patterns` + `/tailwind-ui-patterns`

5. **ä¿®æ”¹ useGenerate** (`src/hooks/useGenerate.ts`)
   - generate() å‚æ•°ï¼šä» `(provider, apiKey, options)` æ”¹ä¸º `(model, options)`
   - åˆ é™¤å‰ç«¯ prompt æ„å»ºé€»è¾‘ï¼ˆbuildPrompt è°ƒç”¨ï¼‰
   - åˆ é™¤å‰ç«¯ few-shot è·å–é€»è¾‘ï¼ˆgetBlessings è°ƒç”¨ï¼‰
   - æ”¹ä¸ºè°ƒç”¨æ–°çš„ `createGenerateStream(model, options, callbacks, signal)`
   - ä»ç„¶ä¿ç•™ 3 ä¸ªå¹¶è¡Œæµï¼ˆæ¯ç§ style ä¸€ä¸ªï¼‰çš„æ¶æ„

6. **ä¿®æ”¹ App.tsx**
   - åˆ é™¤ `useProviders` å¯¼å…¥å’Œè°ƒç”¨
   - åˆ é™¤ `ApiConfigModal` æ¸²æŸ“
   - æ–°å¢ `useModelSelect` è°ƒç”¨
   - æ–°å¢ `ModelSelector` æ¸²æŸ“ï¼ˆæ”¾åœ¨ Header ä¸‹æ–¹æˆ– InputPanel å†…ï¼‰
   - generate è°ƒç”¨æ”¹ä¸ºä¼  selectedModel

7. **ä¿®æ”¹ Header.tsx**
   - åˆ é™¤è®¾ç½®æŒ‰é’®ï¼ˆé½¿è½®å›¾æ ‡ + çº¢ç‚¹æŒ‡ç¤ºå™¨ï¼‰
   - åˆ é™¤ isConfigured / onConfigClick props

8. **ä¿®æ”¹ InputPanel.tsx**
   - åˆ é™¤ isConfigured prop ç›¸å…³çš„æŒ‰é’®ç¦ç”¨é€»è¾‘
   - ç”ŸæˆæŒ‰é’®çš„ç¦ç”¨æ¡ä»¶æ”¹ä¸ºï¼š`!selectedModel || !relationship`

9. **æ›´æ–°é…ç½®**
   - `vite.config.ts` - åˆ é™¤ server.proxy é…ç½®ï¼ˆæœ¬åœ°å¼€å‘ç”¨ vercel devï¼‰
   - `package.json` - æ·»åŠ  "vercel-build": "vite build"ï¼Œåˆ é™¤ express ç›¸å…³ä¾èµ–

**åˆ é™¤çš„æ–‡ä»¶ï¼š**
- `src/hooks/useProviders.ts`
- `src/components/ApiConfigModal.tsx`
- `src/skills/promptBuilder.ts`
- `src/skills/blessingStore.ts`
- `server/` ç›®å½•

**éªŒè¯ï¼š**
- æ¨¡å‹åˆ—è¡¨æ­£å¸¸åŠ è½½
- ç”ŸæˆæŒ‰é’®çŠ¶æ€æ­£ç¡®
- é¡µé¢æ— æŠ¥é”™

**å†³ç­–è®°å½•ï¼š**
- Hook è®¾è®¡æ–¹æ¡ˆ
- ç»„ä»¶æ‹†åˆ†ç­–ç•¥

---

### Phase 3: æµ‹è¯•ä¸éªŒè¯ (1å°æ—¶)

**ç›®æ ‡ï¼š** ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

**æ­¥éª¤ï¼š**
1. **API æµ‹è¯•**
   ```bash
   # å¥åº·æ£€æŸ¥
   curl http://localhost:3000/api/health
   
   # æ¨¡å‹åˆ—è¡¨
   curl http://localhost:3000/api/models
   
   # æµå¼ç”Ÿæˆæµ‹è¯•
   curl -N -X POST http://localhost:3000/api/generate \
     -H "Content-Type: application/json" \
     -d '{"model":"deepseek-chat","relationship":"friend","style":"casual","length":"medium"}'
   ```

2. **åŠŸèƒ½æµ‹è¯•**
   - [ ] æ‰“å¼€åº”ç”¨ï¼Œæ¨¡å‹åˆ—è¡¨åŠ è½½
   - [ ] é€‰æ‹©æ¨¡å‹ï¼Œè®°ä½é€‰æ‹©ï¼ˆåˆ·æ–°åä»åœ¨ï¼‰
   - [ ] å¡«å†™è¡¨å•ï¼ˆå…³ç³»ç±»å‹ã€æ”¶ç¤¼äººå§“åç­‰ï¼‰
   - [ ] ç‚¹å‡»ç”Ÿæˆï¼Œ3 ç§é£æ ¼å¹¶è¡Œç”Ÿæˆ
   - [ ] SSE æµå¼é€å­—æ˜¾ç¤º
   - [ ] å–æ¶ˆç”ŸæˆåŠŸèƒ½æ­£å¸¸
   - [ ] æ‰‹æœºæµè§ˆå™¨æ­£å¸¸è®¿é—®

3. **å®‰å…¨æ£€æŸ¥**
   - **ä½¿ç”¨ Skillï¼š** `/security-auditor`
   - æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸æ³„éœ²åˆ°å‰ç«¯
   - æ£€æŸ¥ç”¨æˆ·è¾“å…¥éªŒè¯
   - æ£€æŸ¥ API å“åº”å®‰å…¨

4. **ä»£ç å®¡æŸ¥**
   - **ä½¿ç”¨ Skillï¼š** `/code-review`
   - å®¡æŸ¥æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶

**é—®é¢˜è®°å½•ï¼š**
åœ¨ `task-plan.md` ä¸­è®°å½•æ‰€æœ‰é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

### Phase 4: Vercel éƒ¨ç½² (30åˆ†é’Ÿ)

**ç›®æ ‡ï¼š** éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**æ­¥éª¤ï¼š**
1. **Git åˆå§‹åŒ–**
   ```bash
   cd /home/luka/Projects/blessing
   git init
   git add -A
   git commit -m "feat: migrate to Vercel Serverless Functions"
   ```

2. **æ¨é€åˆ° GitHub**
   ```bash
   gh repo create blessing --public --source=. --push
   # æˆ–æ‰‹åŠ¨åˆ›å»ºä»“åº“å push
   ```

3. **Vercel é…ç½®**
   - ç™»å½• https://vercel.com
   - Import GitHub ä»“åº“
   - Framework Preset: Vite
   - Build Command: `vite build`
   - Output Directory: `dist`

4. **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼ˆåœ¨ Vercel Dashboardï¼‰
   ```
   DEEPSEEK_API_KEY=sk-xxx
   OPENAI_API_KEY=sk-xxx
   ZHIPU_API_KEY=xxx
   MOONSHOT_API_KEY=xxx
   DASHSCOPE_API_KEY=xxx
   SILICONFLOW_API_KEY=xxx
   ```
   - åªéœ€é…ç½®ä½ æœ‰çš„ keyï¼Œæ²¡é…ç½®çš„ provider ä¸ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­

5. **éƒ¨ç½²**
   ```bash
   npx vercel --prod
   ```

6. **éªŒè¯éƒ¨ç½²**
   ```bash
   curl https://<your-app>.vercel.app/api/health
   curl https://<your-app>.vercel.app/api/models
   ```
   - æµè§ˆå™¨æ‰“å¼€ https://<your-app>.vercel.app éªŒè¯å®Œæ•´åŠŸèƒ½

**è¾“å‡ºæ–‡æ¡£ï¼š**
åœ¨ `task-plan.md` è®°å½•ï¼š
- é¡¹ç›® URL
- Vercel é¡¹ç›®åœ°å€
- éƒ¨ç½²æ—¶é—´

---

## ğŸ“¦ è¾“å‡ºæ–‡ä»¶æ¸…å•

### ä»£ç æ–‡ä»¶
**Serverless Functions:**
- `api/generate.ts` - SSE æµå¼ç”Ÿæˆ API
- `api/models.ts` - æ¨¡å‹åˆ—è¡¨ API  
- `api/health.ts` - å¥åº·æ£€æŸ¥ API

**æœåŠ¡ç«¯å…±äº«ä»£ç :**
- `lib/providers.ts` - Provider é…ç½®
- `lib/promptBuilder.ts` - Prompt æ„å»º
- `lib/blessingStore.ts` - Few-shot ç¤ºä¾‹

**å‰ç«¯ä¿®æ”¹:**
- `src/services/llm.ts` - é‡å†™åçš„ LLM æœåŠ¡
- `src/hooks/useModelSelect.ts` - æ¨¡å‹é€‰æ‹© Hook
- `src/hooks/useGenerate.ts` - ä¿®æ”¹åçš„ç”Ÿæˆ Hook
- `src/components/ModelSelector.tsx` - æ¨¡å‹é€‰æ‹©å™¨ç»„ä»¶
- `src/App.tsx` - ä¿®æ”¹åçš„ä¸»ç»„ä»¶
- `src/components/Header.tsx` - ä¿®æ”¹åçš„å¤´éƒ¨
- `src/components/InputPanel.tsx` - ä¿®æ”¹åçš„è¾“å…¥é¢æ¿
- `src/types.ts` - æ›´æ–°åçš„ç±»å‹å®šä¹‰

### é…ç½®æ–‡ä»¶
- `vercel.json` - Vercel é…ç½®
- `vite.config.ts` - æ›´æ–°åçš„ Vite é…ç½®
- `package.json` - æ›´æ–°åçš„ä¾èµ–

### æ–‡æ¡£æ–‡ä»¶
- `task-plan.md` - ä»»åŠ¡è®¡åˆ’å’Œå†³ç­–è®°å½•

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†

### MVP å¿…é¡»å®Œæˆï¼ˆæœ€ä½è¦æ±‚ï¼‰
- âœ… Vercel Serverless Functions æ­£å¸¸è¿è¡Œ
- âœ… `/api/models` è¿”å›å·²é…ç½®çš„æ¨¡å‹
- âœ… `/api/generate` SSE æµå¼ç”Ÿæˆæ­£å¸¸
- âœ… å‰ç«¯æ¨¡å‹é€‰æ‹©å™¨å¯ç”¨
- âœ… 3 ç§é£æ ¼å¹¶è¡Œç”Ÿæˆæ­£å¸¸
- âœ… å–æ¶ˆç”ŸæˆåŠŸèƒ½æ­£å¸¸
- âœ… éƒ¨ç½²åˆ° Vercel å¯è®¿é—®

### ç†æƒ³æƒ…å†µ
- âœ… å“åº”é€Ÿåº¦ < 2s
- âœ… ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½
- âœ… ä»£ç é€šè¿‡ security-auditor æ£€æŸ¥
- âœ… å®Œæ•´çš„æ–‡æ¡£å’Œå†³ç­–è®°å½•

---

## âŒ é”™è¯¯å¤„ç†

### å¦‚æœé‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜

1. åœ¨ `task-plan.md` ä¸­è®°å½•ï¼š
   ```markdown
   ### é—®é¢˜è®°å½• [YYYY-MM-DD HH:MM]
   - ä»»åŠ¡: [ä»»åŠ¡åç§°]
   - é—®é¢˜æè¿°: [å…·ä½“é—®é¢˜]
   - å°è¯•è¿‡çš„æ–¹æ¡ˆ: [ä½ è¯•è¿‡çš„æ‰€æœ‰æ–¹æ¡ˆ]
   - ä½¿ç”¨çš„ Skill: [å°è¯•è¿‡çš„ skills]
   - å‚è€ƒèµ„æº: [æœç´¢åˆ°çš„æ–‡æ¡£/issueé“¾æ¥]
   - çŠ¶æ€: blocked / workaround-found
   - å»ºè®®: [å¯¹ç”¨æˆ·çš„å»ºè®®]
   ```

2. ä¸è¦å¡ä½ï¼Œç»§ç»­åšå…¶ä»–ä»»åŠ¡

### å¦‚æœæ—¶é—´ä¸å¤Ÿ

1. ä¼˜å…ˆå®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼š
   - Phase 1ï¼ˆå¿…é¡»å®Œæˆï¼Œå¦åˆ™æ— æ³•è¿è¡Œï¼‰
   - Phase 2ï¼ˆå¿…é¡»å®Œæˆï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ï¼‰
   - Phase 3ï¼ˆé‡è¦ï¼Œç¡®ä¿è´¨é‡ï¼‰
   - Phase 4ï¼ˆå°½é‡å®Œæˆï¼‰

2. åœ¨ `task-plan.md` ä¸­æ ‡è®°ï¼š
   - âœ… å·²å®Œæˆ
   - ğŸš§ è¿›è¡Œä¸­
   - â¸ï¸ æš‚æœªå®ç° (è¯´æ˜åŸå› å’Œå»ºè®®)

---

## âœ… ä»£ç è´¨é‡è¦æ±‚

1. **ç»„ä»¶åŒ–**ï¼šåˆç†æ‹†åˆ†ï¼Œé¿å…è¶…å¤§ç»„ä»¶
2. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ TypeScriptï¼Œæ˜ç¡®å®šä¹‰æ¥å£
3. **ä»£ç å¯è¯»æ€§**ï¼šæ¸…æ™°å‘½åï¼Œå¿…è¦æ³¨é‡Š
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šReact.memoã€useMemoã€useCallback
5. **é”™è¯¯å¤„ç†**ï¼šåˆç†çš„ try-catch å’Œé”™è¯¯æç¤º

---

## ğŸŒ™ å¼€å§‹å·¥ä½œ

1. ä»”ç»†é˜…è¯» `plan.txt`
2. åˆ›å»º `task-plan.md`
3. å¼€å§‹ Phase 1
4. **æ¯å®Œæˆä¸€ä¸ª Phaseï¼Œä½¿ç”¨ `/code-review` å®¡æŸ¥ä»£ç **
5. **é‡åˆ°æŠ€æœ¯é—®é¢˜ï¼Œç«‹å³ä½¿ç”¨ç›¸åº” Skill**
6. æ¯30åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ task-plan.md è¿›åº¦
7. æ˜å¤©æ—©ä¸Šæˆ‘æ¥éªŒæ”¶

**è®°ä½ï¼šæ…¢æ…¢åšï¼Œåšå¯¹æœ€é‡è¦ã€‚å–„ç”¨ Skillsï¼Œæ™šå®‰ï¼ğŸ’¤**
